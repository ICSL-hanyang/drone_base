<?xml version="1.0"?>
<launch>
    <arg name="rviz" default="true"/>
    <arg name="joy" default="false"/>
    <!-- MAVROS posix SITL environment launch script -->
    <!-- launches MAVROS, PX4 SITL, Gazebo environment, and spawns vehicle -->

    <!-- gazebo configs -->
    <arg name="gui" default="true"/>
    <arg name="debug" default="false"/>
    <arg name="verbose" default="false"/>
    <arg name="paused" default="false"/>
    <arg name="respawn_gazebo" default="false"/>
    <arg name="user_ip" default="localhost"/>
    <!-- MAVROS configs -->
    <!-- <arg name="gcs_url" default="udp://:14540@$(arg user_ip):14550"/> -->
    <arg name="fcu_url" default="/dev/ttyUSB0:921600"/>
    <!-- <arg name="fcu_url" default="udp://:14540@$(arg user_ip):14557"/> -->
    <arg name="respawn_mavros" default="false"/>
    
    <!-- MAVROS -->
    <include file="$(find uv_base)/launch/mavros/mavros_px4.launch">
        <!-- GCS link is provided by SITL -->
        <arg name="gcs_url" value="$(arg gcs_url)"/>
        <arg name="fcu_url" value="$(arg fcu_url)"/>
        <arg name="respawn_mavros" value="$(arg respawn_mavros)"/>
    </include>

    <!-- Joystick -->
    <node if="$(arg joy)" name="joy_node" pkg="joy" type="joy_node" output="screen" respawn="true">
    </node>
    <node if="$(arg joy)" name="joystick_control_node" pkg="uv_base" type="joystick_control_node" output="screen" respawn="true">
    </node>

    <param name="robot_description" textfile="$(find uv_base)/config/posix-configs/models/rover/rover.urdf" />
    <!-- rviz -->
    <node if="$(arg rviz)" type="rviz" name="rviz" pkg="rviz" args="-d $(find uv_base)/config/uv-configs/rviz/uv.rviz">
    </node>

    <!-- <node pkg="uv_base" type="uv_base_node" name="uv_base_node" /> -->

</launch>
